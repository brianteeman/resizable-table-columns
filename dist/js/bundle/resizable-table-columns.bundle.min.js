var ResizableTableColumns=function(){"use strict";var i=(n.escapeRegExp=function(e){return e.replace(n.regexEscapeRegex,"\\$&")},n.kebabCaseToCamelCase=function(e){return e.replace(n.kebabCaseRegex,function(e){return e[1].toUpperCase()})},n.parseStringToType=function(e){if(0==e.length||n.onlyWhiteSpace.test(e))return e;if(n.trueRegex.test(e))return!0;if(n.falseRegex.test(e))return!1;if(n.notEmptyOrWhiteSpace.test(e)){var t=+e;if(!isNaN(t))return t}return e},n.parseStyleDimension=function(e,t){if("string"==typeof e){if(e.length){var n=e.replace("px","").replace(",","."),a=parseFloat(n);if(!isNaN(a))return a}}else if("number"==typeof e)return e;return t?e:0},n.regexEscapeRegex=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,n.kebabCaseRegex=/(\-\w)/g,n.trueRegex=/^true$/i,n.falseRegex=/^false$/i,n.onlyWhiteSpace=/^\s$/,n.notEmptyOrWhiteSpace=/\S/,n);function n(){}var v=(s.addClass=function(e,t){e.classList?e.classList.add(t):s.hasClass(e,t)||(e.className+=" "+t)},s.removeClass=function(e,t){if(e.classList)e.classList.remove(t);else if(s.hasClass(e,t)){var n=new RegExp("(\\s|^)"+i.escapeRegExp(t)+"(\\s|$)");e.className=e.className.replace(n," ")}},s.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.className.match(new RegExp("(\\s|^)"+i.escapeRegExp(t)+"(\\s|$)"))},s.getDataAttributesValues=function(e){if(!e)return null;var t={};if(e.dataset)for(var n in e.dataset)e.dataset.hasOwnProperty(n)&&(t[n]=i.parseStringToType(e.dataset[n]));else for(var a=0;a<e.attributes.length;a++)/^data\-/.test(e.attributes[a].name)&&(t[i.kebabCaseToCamelCase(e.attributes[a].name.replace("data-",""))]=i.parseStringToType(e.attributes[a].value));return t},s.getMinCssWidth=function(e){var t=e.ownerDocument.defaultView.getComputedStyle(e).minWidth,n=i.parseStyleDimension(t,!0);return"number"!=typeof n||isNaN(n)?null:n},s.getMaxCssWidth=function(e){var t=e.ownerDocument.defaultView.getComputedStyle(e).maxWidth,n=i.parseStyleDimension(t,!0);return"number"!=typeof n||isNaN(n)?null:n},s.getOuterWidth=function(e,t){void 0===t&&(t=!1);var n=e.offsetWidth;if(!t)return n;var a=e.ownerDocument.defaultView.getComputedStyle(e);return n+i.parseStyleDimension(a.marginTop,!1)+i.parseStyleDimension(a.marginBottom,!1)},s.getInnerWidth=function(e){var t=s.getOuterWidth(e),n=e.ownerDocument.defaultView.getComputedStyle(e);return t-i.parseStyleDimension(n.borderLeft,!1)-i.parseStyleDimension(n.borderRight,!1)},s.getWidth=function(e){var t=s.getOuterWidth(e),n=e.ownerDocument.defaultView.getComputedStyle(e);return t-i.parseStyleDimension(n.paddingLeft,!1)-i.parseStyleDimension(n.paddingRight,!1)-i.parseStyleDimension(n.borderLeft,!1)-i.parseStyleDimension(n.borderRight,!1)},s.getOuterHeight=function(e,t){void 0===t&&(t=!1);var n=e.offsetHeight;if(!t)return n;var a=e.ownerDocument.defaultView.getComputedStyle(e);return n+i.parseStyleDimension(a.marginTop,!1)+i.parseStyleDimension(a.marginBottom,!1)},s.getInnerHeight=function(e){var t=s.getOuterHeight(e),n=e.ownerDocument.defaultView.getComputedStyle(e);return t-i.parseStyleDimension(n.borderTop,!1)-i.parseStyleDimension(n.borderBottom,!1)},s.getHeight=function(e){var t=s.getOuterHeight(e),n=e.ownerDocument.defaultView.getComputedStyle(e);return t-i.parseStyleDimension(n.paddingTop,!1)-i.parseStyleDimension(n.paddingBottom,!1)-i.parseStyleDimension(n.borderTop,!1)-i.parseStyleDimension(n.borderBottom,!1)},s.getOffset=function(e){if(!e)return null;var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},s.matches=function(e,t){for(var n,a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],i=0;i<a.length;i++)if("function"==typeof e.ownerDocument.body[a[i]]){n=a[i];break}return e[n](t)},s.closest=function(e,t){if(!e)return null;if("function"==typeof e.closest)return e.closest(t);for(var n=e;n&&1===n.nodeType;){if(s.matches(n,t))return n;n=n.parentNode}return null},s.getPointerX=function(e){if(0===e.type.indexOf("touch")){if(e.touches&&e.touches.length)return e.touches[0].pageX;if(e.changedTouches&&e.changedTouches.length)return e.changedTouches[0].pageX}return e.pageX},s.getTextWidth=function(e,t){if(!e||!t)return 0;var n=e.textContent.trim().replace(/\s/g,"&nbsp;")+"&nbsp;",a=e.ownerDocument.defaultView.getComputedStyle(e);return["fontFamily","fontSize","fontWeight","padding","border"].forEach(function(e){t.style[e]=a[e]}),t.innerHTML=n,s.getOuterWidth(t,!0)},s);function s(){}var a=(e.prototype.overrideValues=function(e){if(e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.overrideValuesFromElement=function(e){if(e){var t=v.getDataAttributesValues(e);this.overrideValues(t)}},e);function e(e,t){this.resizeFromBody=!0,this.minWidth=40,this.maxWidth=null,this.obeyCssMinWidth=!1,this.obeyCssMaxWidth=!1,this.doubleClickDelay=500,this.store=null,this.overrideValues(e),this.overrideValuesFromElement(t)}var y=(t.dataPropertyname="rtc_data_object",t.classes={table:"rtc-table",wrapper:"rtc-wrapper",handleContainer:"rtc-handle-container",handle:"rtc-handle",tableResizing:"rtc-table-resizing",columnResizing:"rtc-column-resizing"},t.attibutes={dataResizable:"data-rtc-resizable",dataResizableTable:"data-rtc-resizable-table"},t.data={resizable:"rtcResizable",resizableTable:"rtcResizableTable"},t.events={pointerDown:["mousedown","touchstart"],pointerMove:["mousemove","touchmove"],pointerUp:["mouseup","touchend"],windowResize:["resize"],eventResizeStart:"eventResizeStart.rtc",eventResize:"eventResize.rtc",eventResizeStop:"eventResizeStop.rtc"},t);function t(){}var c=function(){};function w(e,t){if("object"!=typeof e||null===e||"[object HTMLTableElement]"!==e.toString())throw'Invalid argument: "table".\nResizableTableColumns requires that the table element is a not null HTMLTableElement object!';if(void 0!==e[y.dataPropertyname])throw'Existing "'+y.dataPropertyname+"\" property.\nTable elemet already has a '"+y.dataPropertyname+"' attached object!";this.id=w.getInstanceId(),this.table=e,this.options=new a(t,e),this.wrapper=null,this.ownerDocument=e.ownerDocument,this.tableHeaders=[],this.dragHandlesContainer=null,this.originalWidths={},this.eventData=null,this.lastPointerDown=0,this.init(),this.table[y.dataPropertyname]=this}return w.prototype.init=function(){this.validateMarkup(),this.createHandlerReferences(),this.wrapTable(),this.asignTableHeaders(),this.storeOriginalWidths(),this.setHeaderWidths(),this.createDragHandles(),this.restoreColumnWidths(),this.checkTableWidth(),this.syncHandleWidths(),this.registerWindowResizeHandler()},w.prototype.dispose=function(){this.destroyDragHandles(),this.restoreOriginalWidths(),this.unwrapTable(),this.onPointerDownRef=null,this.onPointerMoveRef=null,this.onPointerUpRef=null,this.table[y.dataPropertyname]=void 0},w.prototype.validateMarkup=function(){for(var e,t=0,n=0,a=0;a<this.table.childNodes.length;a++)"THEAD"===(l=this.table.childNodes[a]).nodeName?(t++,e=l):"TBODY"===l.nodeName&&n++;if(1!==t)throw"Markup validation: thead count.\nResizableTableColumns requires that the table element has one(1) table head element. Current count: "+t;if(1!==n)throw"Markup validation: tbody count.\nResizableTableColumns requires that the table element has one(1) table body element. Current count: "+n;var i=0,s=null;for(a=0;a<e.childNodes.length;a++)"TR"===(l=e.childNodes[a]).nodeName&&(i++,null===s&&(s=l));if(i<1)throw"Markup validation: thead row count.\nResizableTableColumns requires that the table head element has at least one(1) table row element. Current count: "+i;var r=0,o=0;for(a=0;a<s.childNodes.length;a++){var l;"TH"===(l=s.childNodes[a]).nodeName?r++:"TD"===l.nodeName&&o++}if(r<1)throw"Markup validation: thead first row cells count.\nResizableTableColumns requires that the table head's first row element has at least one(1) table header cell element. Current count: "+r;if(0!==o)throw"Markup validation: thead first row invalid.\nResizableTableColumns requires that the table head's first row element has no(0) table cell(TD) elements. Current count: "+o},w.prototype.wrapTable=function(){if(!this.wrapper){this.wrapper=this.ownerDocument.createElement("div");var e=this.table.parentNode;e.insertBefore(this.wrapper,this.table),e.removeChild(this.table),this.wrapper.appendChild(this.table),v.addClass(this.wrapper,y.classes.wrapper),v.addClass(this.table,y.classes.table)}},w.prototype.unwrapTable=function(){if(v.removeClass(this.table,y.classes.table),this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.table,this.wrapper),e.removeChild(this.wrapper),this.wrapper=null}},w.prototype.asignTableHeaders=function(){for(var e,t,n=0;n<this.table.childNodes.length;n++)if("THEAD"===(a=this.table.childNodes[n]).nodeName){e=a;break}for(n=0;n<e.childNodes.length;n++)if("TR"===(a=e.childNodes[n]).nodeName){t=a;break}for(n=0;n<t.childNodes.length;n++){var a;"TH"===(a=t.childNodes[n]).nodeName&&this.tableHeaders.push(a)}},w.prototype.storeOriginalWidths=function(){var n=this;this.tableHeaders.forEach(function(e,t){n.originalWidths["___."+t]=e.style.width}),this.originalWidths["___.table"]=this.table.style.width},w.prototype.restoreOriginalWidths=function(){var n=this;this.tableHeaders.forEach(function(e,t){e.style.width=n.originalWidths["___."+t]}),this.table.style.width=this.originalWidths["___.table"]},w.prototype.setHeaderWidths=function(){var i=this;this.tableHeaders.forEach(function(e,t){var n=v.getWidth(e),a=i.constrainWidth(e,n);w.setWidth(e,a)})},w.prototype.constrainWidth=function(e,t){var n=t,a=this.options.obeyCssMinWidth?v.getMinCssWidth(e):-1/0;n=Math.max(n,a,this.options.minWidth||-1/0);var i=this.options.obeyCssMaxWidth?v.getMaxCssWidth(e):1/0;return n=Math.min(n,i,this.options.maxWidth||1/0)},w.prototype.createDragHandles=function(){var a=this;if(null!=this.dragHandlesContainer)throw"Drag handlers allready created. Call <destroyDragHandles> if you wish to recreate them";this.dragHandlesContainer=this.ownerDocument.createElement("div"),this.wrapper.insertBefore(this.dragHandlesContainer,this.table),v.addClass(this.dragHandlesContainer,y.classes.handleContainer),this.getResizableHeaders().forEach(function(e,t){var n=a.ownerDocument.createElement("div");v.addClass(n,y.classes.handle),a.dragHandlesContainer.appendChild(n)}),y.events.pointerDown.forEach(function(e,t){a.dragHandlesContainer.addEventListener(e,a.onPointerDownRef,!1)})},w.prototype.destroyDragHandles=function(){var n=this;null!==this.dragHandlesContainer&&(y.events.pointerDown.forEach(function(e,t){n.dragHandlesContainer.removeEventListener(e,n.onPointerDownRef,!1)}),this.dragHandlesContainer.parentElement.removeChild(this.dragHandlesContainer))},w.prototype.getDragHandlers=function(){var e=null==this.dragHandlesContainer?null:this.dragHandlesContainer.querySelectorAll("."+y.classes.handle);return e?Array.prototype.slice.call(e).filter(function(e){return"DIV"===e.nodeName}):new Array},w.prototype.restoreColumnWidths=function(){if(this.options.store){var e=w.generateTableId(this.table);if(0!==e.length){var a=this.options.store.get(e);a&&(this.getResizableHeaders().forEach(function(e,t){var n=a.columns[w.generateColumnId(e)];void 0!==n&&w.setWidth(e,n)}),void 0!==a.table&&w.setWidth(this.table,a.table))}}},w.prototype.checkTableWidth=function(){var e=v.getWidth(this.wrapper),t=e-v.getOuterWidth(this.table,!0);if(0<t){var a=0,i=0,n=0,s=[];this.tableHeaders.forEach(function(e,t){var n=w.getWidth(e);s.push(n),a+=n,e.hasAttribute(y.attibutes.dataResizable)&&(i+=n)}),w.setWidth(this.table,e);for(var r=0;r<this.tableHeaders.length;r++){var o=this.tableHeaders[r],l=s.shift();if(o.hasAttribute(y.attibutes.dataResizable)){var h=l+l/i*t,d=a+t-n;h=Math.min(h,d),h=Math.max(h,0);var u=this.constrainWidth(o,h);w.setWidth(o,u),n+=h}else n+=l;if(a<=n)break}}},w.prototype.syncHandleWidths=function(){var s=this,e=v.getWidth(this.table);w.setWidth(this.dragHandlesContainer,e),this.dragHandlesContainer.style.minWidth=e+"px";var r=this.getResizableHeaders();this.getDragHandlers().forEach(function(e,t){var n=v.getInnerHeight(s.options.resizeFromBody?s.table:s.table.tHead);if(t<r.length){var a=r[t],i=v.getOuterWidth(a);i+=v.getOffset(a).left,i-=v.getOffset(s.dragHandlesContainer).left,e.style.left=i+"px",e.style.height=n+"px"}})},w.prototype.getResizableHeaders=function(){return this.tableHeaders.filter(function(e,t){return e.hasAttribute(y.attibutes.dataResizable)})},w.prototype.handlePointerDown=function(e){this.handlePointerUp();var t=e?e.target:null;if(null!=t&&"DIV"===t.nodeName&&v.hasClass(t,y.classes.handle)&&("number"!=typeof e.button||0===e.button)){var n=t,a=this.getDragHandlers().indexOf(n),i=this.getResizableHeaders();if(!(a>=i.length)){var s=(new Date).getTime(),r=s-this.lastPointerDown<this.options.doubleClickDelay,o=i[a],l=w.getWidth(o),h=w.getWidth(this.table),d=new c;d.column=o,d.dragHandler=n,d.pointer={x:v.getPointerX(e),isDoubleClick:r},d.originalWidths={column:l,table:h},this.detachHandlers(),this.attachHandlers(),v.addClass(this.table,y.classes.tableResizing),v.addClass(this.wrapper,y.classes.tableResizing),v.addClass(n,y.classes.columnResizing),v.addClass(o,y.classes.columnResizing),this.lastPointerDown=s,this.eventData=d;var u=new CustomEvent(y.events.eventResizeStart,{detail:{column:o,columnWidth:l,table:this.table,tableWidth:h}});this.table.dispatchEvent(u),e.preventDefault()}}},w.prototype.handlePointerMove=function(e){if(this.eventData&&e){var t=v.getPointerX(e)-this.eventData.pointer.x;if(0!=t){var n=this.eventData.originalWidths.table+t,a=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+t);w.setWidth(this.table,n),w.setWidth(this.eventData.column,a),this.eventData.newWidths={column:a,table:n};var i=new CustomEvent(y.events.eventResize,{detail:{column:this.eventData.column,columnWidth:a,table:this.table,tableWidth:n}});this.table.dispatchEvent(i)}}},w.prototype.handlePointerUp=function(){if(this.detachHandlers(),this.eventData){this.eventData.pointer.isDoubleClick&&this.handleDoubleClick(),v.removeClass(this.table,y.classes.tableResizing),v.removeClass(this.wrapper,y.classes.tableResizing),v.removeClass(this.eventData.dragHandler,y.classes.columnResizing),v.removeClass(this.eventData.column,y.classes.columnResizing),this.checkTableWidth(),this.syncHandleWidths(),this.refreshWrapperStyle(),this.saveColumnWidths();var e=this.eventData.newWidths||this.eventData.originalWidths,t=new CustomEvent(y.events.eventResizeStop,{detail:{column:this.eventData.column,columnWidth:e.column,table:this.table,tableWidth:e.table}});this.table.dispatchEvent(t),this.eventData=null}},w.prototype.handleDoubleClick=function(){if(this.eventData&&this.eventData.column){var e=this.eventData.column,t=this.tableHeaders.indexOf(e),n=0,a=[];this.tableHeaders.forEach(function(e,t){e.hasAttribute(y.attibutes.dataResizable)||a.push(t)});var i=this.ownerDocument.createElement("span");i.style.position="absolute",i.style.left="-99999px",i.style.top="-99999px",i.style.visibility="hidden",this.ownerDocument.body.appendChild(i);for(var s=this.table.querySelectorAll("tr"),r=0;r<s.length;r++)for(var o=s[r].querySelectorAll("td, th"),l=0,h=0;h<o.length;h++){var d=o[h],u=1;if(d.hasAttribute("colspan")){var c=d.getAttribute("colspan")||"1",p=parseInt(c);u=isNaN(p)?1:p}if(-1===a.indexOf(h)&&1===u&&l===t){n=Math.max(n,v.getTextWidth(d,i));break}l+=u}this.ownerDocument.body.removeChild(i);var f=n-v.getWidth(e);if(0!=f){var b=this.eventData.originalWidths.table+f,m=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+f);w.setWidth(this.table,b),w.setWidth(this.eventData.column,m),this.eventData.newWidths={column:m,table:b};var g=new CustomEvent(y.events.eventResize,{detail:{column:this.eventData.column,columnWidth:m,table:this.table,tableWidth:b}});this.table.dispatchEvent(g)}}},w.prototype.attachHandlers=function(){var n=this;y.events.pointerMove.forEach(function(e,t){n.ownerDocument.addEventListener(e,n.onPointerMoveRef,!1)}),y.events.pointerUp.forEach(function(e,t){n.ownerDocument.addEventListener(e,n.onPointerUpRef,!1)})},w.prototype.detachHandlers=function(){var n=this;y.events.pointerMove.forEach(function(e,t){n.ownerDocument.removeEventListener(e,n.onPointerMoveRef,!1)}),y.events.pointerUp.forEach(function(e,t){n.ownerDocument.removeEventListener(e,n.onPointerUpRef,!1)})},w.prototype.refreshWrapperStyle=function(){if(null!=this.wrapper){var e=this.wrapper.style.overflowX;this.wrapper.style.overflowX="hidden",this.wrapper.style.overflowX=e}},w.prototype.saveColumnWidths=function(){if(this.options.store){var e=w.generateTableId(this.table);if(0!==e.length){var n={table:w.getWidth(this.table),columns:{}};this.getResizableHeaders().forEach(function(e,t){n.columns[w.generateColumnId(e)]=w.getWidth(e)}),this.options.store.set(e,n)}}},w.prototype.createHandlerReferences=function(){var t=this;this.onPointerDownRef||(this.onPointerDownRef=function(e){t.handlePointerDown(e)}),this.onPointerMoveRef||(this.onPointerMoveRef=function(e){t.handlePointerMove(e)}),this.onPointerUpRef||(this.onPointerUpRef=function(e){t.handlePointerUp()})},w.prototype.registerWindowResizeHandler=function(){var n=this.ownerDocument.defaultView;w.windowResizeHandlerRegistered||(w.windowResizeHandlerRegistered=!0,y.events.windowResize.forEach(function(e,t){n.addEventListener(e,w.onWindowResize,!1)}))},w.prototype.handleWindowResize=function(){this.checkTableWidth(),this.syncHandleWidths()},w.onWindowResize=function(e){var t=e?e.target:null;if(null!=t)for(var n=t.document.querySelectorAll("."+y.classes.table),a=0;a<n.length;a++){var i=n[a];"object"==typeof i[y.dataPropertyname]&&i[y.dataPropertyname].handleWindowResize()}},w.generateColumnId=function(e){return(e.getAttribute(y.attibutes.dataResizable)||"").trim().replace(/\./g,"_")},w.generateTableId=function(e){var t=(e.getAttribute(y.attibutes.dataResizableTable)||"").trim().replace(/\./g,"_");return t.length?"rtc/"+t:t},w.getWidth=function(e){return""===e.style.width?v.getWidth(e):i.parseStyleDimension(e.style.width,!1)},w.setWidth=function(e,t){var n=t.toFixed(2);n=0<t?n:"0",e.style.width=n+"px"},w.getInstanceId=function(){return w.instancesCount++},w.instancesCount=0,w.windowResizeHandlerRegistered=!1,w}();