var ResizableTableColumns=function(){"use strict";var e=function(){function e(){}return e.escapeRegExp=function(t){return t.replace(e.regexEscapeRegex,"\\$&")},e.kebabCaseToCamelCase=function(t){return t.replace(e.kebabCaseRegex,function(e){return e[1].toUpperCase()})},e.parseStringToType=function(t){if(0==t.length||e.onlyWhiteSpace.test(t))return t;if(e.trueRegex.test(t))return!0;if(e.falseRegex.test(t))return!1;if(e.notEmptyOrWhiteSpace.test(t)){var a=+t;if(!isNaN(a))return a}return t},e.parseStyleDimension=function(e,t){if("string"==typeof e){if(e.length){var a=e.replace("px","").replace(",","."),r=parseFloat(a);if(!isNaN(r))return r}}else if("number"==typeof e)return e;return t?e:0},e.regexEscapeRegex=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,e.kebabCaseRegex=/(\-\w)/g,e.trueRegex=/^true$/i,e.falseRegex=/^false$/i,e.onlyWhiteSpace=/^\s$/,e.notEmptyOrWhiteSpace=/\S/,e}(),t=function(){function t(){}return t.addClass=function(e,a){e.classList?e.classList.add(a):t.hasClass(e,a)||(e.className+=" "+a)},t.removeClass=function(a,r){if(a.classList)a.classList.remove(r);else if(t.hasClass(a,r)){var i=new RegExp("(\\s|^)"+e.escapeRegExp(r)+"(\\s|$)");a.className=a.className.replace(i," ")}},t.hasClass=function(t,a){return t.classList?t.classList.contains(a):!!t.className.match(new RegExp("(\\s|^)"+e.escapeRegExp(a)+"(\\s|$)"))},t.getDataAttributesValues=function(t){if(!t)return null;var a={};if(t.dataset)for(var r in t.dataset)t.dataset.hasOwnProperty(r)&&(a[r]=e.parseStringToType(t.dataset[r]));else for(var i=0;i<t.attributes.length;i++)if(/^data\-/.test(t.attributes[i].name)){var n=e.kebabCaseToCamelCase(t.attributes[i].name.replace("data-",""));a[n]=e.parseStringToType(t.attributes[i].value)}return a},t.getMinCssWidth=function(t){var a=t.ownerDocument.defaultView.getComputedStyle(t).minWidth,r=e.parseStyleDimension(a,!0);return"number"!=typeof r||isNaN(r)?null:r},t.getMaxCssWidth=function(t){var a=t.ownerDocument.defaultView.getComputedStyle(t).maxWidth,r=e.parseStyleDimension(a,!0);return"number"!=typeof r||isNaN(r)?null:r},t.getOuterWidth=function(t,a){void 0===a&&(a=!1);var r=t.offsetWidth;if(!a)return r;var i=t.ownerDocument.defaultView.getComputedStyle(t);return r+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerWidth=function(a){var r=t.getOuterWidth(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return r-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getWidth=function(a){var r=t.getOuterWidth(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return r-e.parseStyleDimension(i.paddingLeft,!1)-e.parseStyleDimension(i.paddingRight,!1)-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getOuterHeight=function(t,a){void 0===a&&(a=!1);var r=t.offsetHeight;if(!a)return r;var i=t.ownerDocument.defaultView.getComputedStyle(t);return r+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerHeight=function(a){var r=t.getOuterHeight(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return r-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getHeight=function(a){var r=t.getOuterHeight(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return r-e.parseStyleDimension(i.paddingTop,!1)-e.parseStyleDimension(i.paddingBottom,!1)-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getOffset=function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},t}(),a=function(){function e(e,t){this.resizeFromBody=!0,this.minWidth=40,this.maxWidth=null,this.obeyCssMinWidth=!1,this.obeyCssMaxWidth=!1,this.doubleClickDelay=500,this.store=null,this.overrideValues(e),this.overrideValuesFromElement(t)}return e.prototype.overrideValues=function(e){if(e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.overrideValuesFromElement=function(e){if(e){var a=t.getDataAttributesValues(e);this.overrideValues(a)}},e}(),r=function(){function e(){}return e.dataPropertyname="rtc_data_object",e.classes={table:"rtc-table",wrapper:"rtc-wrapper",handleContainer:"rtc-handle-container",handle:"rtc-handle",hidden:"rtc-hidden"},e.attibutes={dataResizable:"data-rtc-resizable",dataResizableTable:"data-rtc-resizable-table"},e.data={resizable:"rtcResizable",resizableTable:"rtcResizableTable"},e.events={pointerDown:["mousedown","touchstart"]},e}();return function(){function i(e,t){if(this.originalWidths={},"object"!=typeof e||null===e||"[object HTMLTableElement]"!==e.toString())throw'Invalid argument: "table".\nResizableTableColumns requires that the table element is a not null HTMLTableElement object!';if(void 0!==e[r.dataPropertyname])throw'Existing "'+r.dataPropertyname+"\" property.\nTable elemet already has a '"+r.dataPropertyname+"' attached object!";this.id=i.getInstanceId(),this.table=e,this.options=new a(t,e),this.wrapper=null,this.ownerDocument=e.ownerDocument,this.tableHeaders=[],this.dragHandlesContainer=null,this.init(),this.table[r.dataPropertyname]=this}return i.prototype.init=function(){this.validateMarkup(),this.wrapTable(),t.addClass(this.wrapper,r.classes.wrapper),t.addClass(this.table,r.classes.table),this.asignTableHeaders(),this.storeHeaderOriginalWidths(),this.setHeaderWidths(),this.createDragHandles(),this.restoreColumnWidths(),this.checkTableWidth(),this.syncHandleWidths()},i.prototype.dispose=function(){t.removeClass(this.table,r.classes.table),this.destroyDragHandles(),this.restoreHeaderOriginalWidths(),this.unwrapTable(),this.table[r.dataPropertyname]=void 0},i.prototype.validateMarkup=function(){for(var e,t=0,a=0,r=0;r<this.table.childNodes.length;r++){var i=this.table.childNodes[r];"THEAD"===i.nodeName?(t++,e=i):"TBODY"===i.nodeName&&a++}if(1!==t)throw"Markup validation: thead count.\nResizableTableColumns requires that the table element has one(1) table head element. Current count: "+t;if(1!==a)throw"Markup validation: tbody count.\nResizableTableColumns requires that the table element has one(1) table body element. Current count: "+a;for(var n=0,s=null,r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];"TR"===i.nodeName&&(n++,null===s&&(s=i))}if(n<1)throw"Markup validation: thead row count.\nResizableTableColumns requires that the table head element has at least one(1) table row element. Current count: "+n;for(var o=0,l=0,r=0;r<s.childNodes.length;r++){var i=s.childNodes[r];"TH"===i.nodeName?o++:"TD"===i.nodeName&&l++}if(o<1)throw"Markup validation: thead first row cells count.\nResizableTableColumns requires that the table head's first row element has at least one(1) table header cell element. Current count: "+o;if(0!==l)throw"Markup validation: thead first row invalid.\nResizableTableColumns requires that the table head's first row element has no(0) table cell(TD) elements. Current count: "+l},i.prototype.wrapTable=function(){if(!this.wrapper){this.wrapper=this.ownerDocument.createElement("div");var e=this.table.parentNode;e.insertBefore(this.wrapper,this.table),e.removeChild(this.table),this.wrapper.appendChild(this.table)}},i.prototype.unwrapTable=function(){if(this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.table,this.wrapper),e.removeChild(this.wrapper),this.wrapper=null}},i.prototype.asignTableHeaders=function(){for(var e,t,a=0;a<this.table.childNodes.length;a++){var r=this.table.childNodes[a];if("THEAD"===r.nodeName){e=r;break}}for(var a=0;a<e.childNodes.length;a++){var r=e.childNodes[a];if("TR"===r.nodeName){t=r;break}}for(var a=0;a<t.childNodes.length;a++){var r=t.childNodes[a];"TH"===r.nodeName&&this.tableHeaders.push(r)}},i.prototype.storeHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(r.attibutes.dataResizable)){var i=t.getAttribute(r.attibutes.dataResizable);e.originalWidths["___."+i]=t.style.width}})},i.prototype.restoreHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(r.attibutes.dataResizable)){var i=t.getAttribute(r.attibutes.dataResizable);t.style.width=e.originalWidths["___."+i]}})},i.prototype.setHeaderWidths=function(){var e=this;this.tableHeaders.forEach(function(a,n){if(a.hasAttribute(r.attibutes.dataResizable)){var s=t.getWidth(a),o=e.options.obeyCssMinWidth?t.getMinCssWidth(a):null;null!=o&&(s=Math.max(o,s,e.options.minWidth));var l=e.options.obeyCssMaxWidth?t.getMaxCssWidth(a):null;null!=l&&(s=Math.min(l,s,e.options.maxWidth)),i.setWidth(a,s)}})},i.setWidth=function(e,t){var a=t.toFixed(2);a=t>0?a:"0",e.style.width=a+"px"},i.prototype.createDragHandles=function(){var e=this;if(null!=this.dragHandlesContainer)throw"Drag handlers allready created. Call <destroyDragHandles> if you wish to recreate them";this.dragHandlesContainer=this.ownerDocument.createElement("div"),this.wrapper.insertBefore(this.dragHandlesContainer,this.table),t.addClass(this.dragHandlesContainer,r.classes.handleContainer),this.tableHeaders.forEach(function(a,i){if(a.hasAttribute(r.attibutes.dataResizable)){var n=e.ownerDocument.createElement("div");t.addClass(n,r.classes.handle),e.dragHandlesContainer.appendChild(n)}}),this.getDragHandlers().forEach(function(e,t){r.events.pointerDown.forEach(function(t,a){e.addEventListener(t,i.onPointerDown,!1)})})},i.prototype.destroyDragHandles=function(){null!==this.dragHandlesContainer&&(this.getDragHandlers().forEach(function(e,t){r.events.pointerDown.forEach(function(t,a){e.removeEventListener(t,i.onPointerDown,!1)})}),this.dragHandlesContainer.parentElement.removeChild(this.dragHandlesContainer))},i.prototype.getDragHandlers=function(){var e=null==this.dragHandlesContainer?null:this.dragHandlesContainer.querySelectorAll("."+r.classes.handle);return e?Array.prototype.slice.call(e).filter(function(e){return"DIV"===e.nodeName}):new Array},i.prototype.restoreColumnWidths=function(){var e=this;this.options.store&&this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(r.attibutes.dataResizable)){var n=e.options.store.get(e.generateColumnId(t));null!=n&&i.setWidth(t,n)}})},i.prototype.generateColumnId=function(e){var t=(e.getAttribute(r.attibutes.dataResizable)||"").trim().replace(/\./g,"_");return this.generateTableId()+"-"+t},i.prototype.generateTableId=function(){var e=(this.table.getAttribute(r.attibutes.dataResizableTable)||"").trim().replace(/\./g,"_");return 0===e.length?"rtc-table-"+this.id:e},i.prototype.checkTableWidth=function(){t.addClass(this.table,r.classes.hidden),t.addClass(this.dragHandlesContainer,r.classes.hidden);var e=t.getWidth(this.wrapper);t.removeClass(this.table,r.classes.hidden),t.removeClass(this.dragHandlesContainer,r.classes.hidden);var a=t.getOuterWidth(this.table,!0),n=e-a;if(n>0){var s=0,o=0,l=0,d=[];this.tableHeaders.forEach(function(e,a){var i=t.getWidth(e);d.push(i),s+=i,e.hasAttribute(r.attibutes.dataResizable)&&(o+=i)}),i.setWidth(this.table,e);for(var h=0;h<this.tableHeaders.length;h++){var u=this.tableHeaders[h],p=d.shift();if(u.hasAttribute(r.attibutes.dataResizable)){var c=p+p/o*n,f=s+n-l;c=Math.min(c,f),c=Math.max(c,0),i.setWidth(u,c),l+=c}else l+=p;if(l>=s)break}}},i.prototype.syncHandleWidths=function(){var a=this,n=t.getWidth(this.table);i.setWidth(this.dragHandlesContainer,n),this.dragHandlesContainer.style.minWidth=n+"px";var s=this.tableHeaders.filter(function(e,t){return e.hasAttribute(r.attibutes.dataResizable)});this.getDragHandlers().forEach(function(r,i){var n=t.getInnerHeight(a.options.resizeFromBody?a.table:a.table.tHead);if(i<s.length){var o=s[i],l=getComputedStyle(o),d=t.getOuterWidth(o);d-=e.parseStyleDimension(l.paddingLeft,!1),d-=e.parseStyleDimension(l.paddingRight,!1),d+=t.getOffset(o).left,d-=t.getOffset(a.dragHandlesContainer).left,r.style.left=d+"px",r.style.height=n+"px"}})},i.getInstanceId=function(){return i.instancesCount++},i.onPointerDown=function(e){console.log("onPointerDown")},i.instancesCount=0,i}()}();