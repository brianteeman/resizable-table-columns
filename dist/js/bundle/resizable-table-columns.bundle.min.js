var ResizableTableColumns=function(){"use strict";var e=function(){function e(){}return e.escapeRegExp=function(t){return t.replace(e.regexEscapeRegex,"\\$&")},e.kebabCaseToCamelCase=function(t){return t.replace(e.kebabCaseRegex,function(e){return e[1].toUpperCase()})},e.parseStringToType=function(t){if(0==t.length||e.onlyWhiteSpace.test(t))return t;if(e.trueRegex.test(t))return!0;if(e.falseRegex.test(t))return!1;if(e.notEmptyOrWhiteSpace.test(t)){var n=+t;if(!isNaN(n))return n}return t},e.parseStyleDimension=function(e,t){if("string"==typeof e){if(e.length){var n=e.replace("px","").replace(",","."),a=parseFloat(n);if(!isNaN(a))return a}}else if("number"==typeof e)return e;return t?e:0},e.regexEscapeRegex=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,e.kebabCaseRegex=/(\-\w)/g,e.trueRegex=/^true$/i,e.falseRegex=/^false$/i,e.onlyWhiteSpace=/^\s$/,e.notEmptyOrWhiteSpace=/\S/,e}(),t=function(){function t(){}return t.addClass=function(e,n){e.classList?e.classList.add(n):t.hasClass(e,n)||(e.className+=" "+n)},t.removeClass=function(n,a){if(n.classList)n.classList.remove(a);else if(t.hasClass(n,a)){var i=new RegExp("(\\s|^)"+e.escapeRegExp(a)+"(\\s|$)");n.className=n.className.replace(i," ")}},t.hasClass=function(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+e.escapeRegExp(n)+"(\\s|$)"))},t.getDataAttributesValues=function(t){if(!t)return null;var n={};if(t.dataset)for(var a in t.dataset)t.dataset.hasOwnProperty(a)&&(n[a]=e.parseStringToType(t.dataset[a]));else for(var i=0;i<t.attributes.length;i++)if(/^data\-/.test(t.attributes[i].name)){var r=e.kebabCaseToCamelCase(t.attributes[i].name.replace("data-",""));n[r]=e.parseStringToType(t.attributes[i].value)}return n},t.getMinCssWidth=function(t){var n=t.ownerDocument.defaultView.getComputedStyle(t).minWidth,a=e.parseStyleDimension(n,!0);return"number"!=typeof a||isNaN(a)?null:a},t.getMaxCssWidth=function(t){var n=t.ownerDocument.defaultView.getComputedStyle(t).maxWidth,a=e.parseStyleDimension(n,!0);return"number"!=typeof a||isNaN(a)?null:a},t.getOuterWidth=function(t,n){void 0===n&&(n=!1);var a=t.offsetWidth;if(!n)return a;var i=t.ownerDocument.defaultView.getComputedStyle(t);return a+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerWidth=function(n){var a=t.getOuterWidth(n),i=n.ownerDocument.defaultView.getComputedStyle(n);return a-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getWidth=function(n){var a=t.getOuterWidth(n),i=n.ownerDocument.defaultView.getComputedStyle(n);return a-e.parseStyleDimension(i.paddingLeft,!1)-e.parseStyleDimension(i.paddingRight,!1)-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getOuterHeight=function(t,n){void 0===n&&(n=!1);var a=t.offsetHeight;if(!n)return a;var i=t.ownerDocument.defaultView.getComputedStyle(t);return a+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerHeight=function(n){var a=t.getOuterHeight(n),i=n.ownerDocument.defaultView.getComputedStyle(n);return a-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getHeight=function(n){var a=t.getOuterHeight(n),i=n.ownerDocument.defaultView.getComputedStyle(n);return a-e.parseStyleDimension(i.paddingTop,!1)-e.parseStyleDimension(i.paddingBottom,!1)-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getOffset=function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},t.matches=function(e,t){for(var n,a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],i=0;i<a.length;i++)if("function"==typeof e.ownerDocument.body[a[i]]){n=a[i];break}return e[n](t)},t.closest=function(e,n){if(!e)return null;if("function"==typeof e.closest)return e.closest(n);for(var a=e;a&&1===a.nodeType;){if(t.matches(a,n))return a;a=a.parentNode}return null},t.getTextWidth=function(e,n){if(!e||!n)return 0;var a=e.textContent.trim().replace(/\s/g,"&nbsp;")+"&nbsp;",i=e.ownerDocument.defaultView.getComputedStyle(e);return["fontFamily","fontSize","fontWeight","padding","border"].forEach(function(e){n.style[e]=i[e]}),n.innerHTML=a,t.getOuterWidth(n,!0)},t}(),n=function(){function e(e,t){this.resizeFromBody=!0,this.minWidth=40,this.maxWidth=null,this.obeyCssMinWidth=!1,this.obeyCssMaxWidth=!1,this.doubleClickDelay=500,this.store=null,this.overrideValues(e),this.overrideValuesFromElement(t)}return e.prototype.overrideValues=function(e){if(e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.overrideValuesFromElement=function(e){if(e){var n=t.getDataAttributesValues(e);this.overrideValues(n)}},e}(),a=function(){function e(){}return e.dataPropertyname="rtc_data_object",e.classes={table:"rtc-table",wrapper:"rtc-wrapper",handleContainer:"rtc-handle-container",handle:"rtc-handle",tableResizing:"rtc-table-resizing",columnResizing:"rtc-column-resizing"},e.attibutes={dataResizable:"data-rtc-resizable",dataResizableTable:"data-rtc-resizable-table"},e.data={resizable:"rtcResizable",resizableTable:"rtcResizableTable"},e.events={pointerDown:["mousedown","touchstart"],pointerMove:["mousemove","touchmove"],pointerUp:["mouseup","touchend"],windowResize:["resize"],eventResizeStart:"eventResizeStart.rtc",eventResize:"eventResize.rtc",eventResizeStop:"eventResizeStop.rtc"},e}(),i=function(){function e(){}return e}();return function(){function r(e,t){if("object"!=typeof e||null===e||"[object HTMLTableElement]"!==e.toString())throw'Invalid argument: "table".\nResizableTableColumns requires that the table element is a not null HTMLTableElement object!';if(void 0!==e[a.dataPropertyname])throw'Existing "'+a.dataPropertyname+"\" property.\nTable elemet already has a '"+a.dataPropertyname+"' attached object!";this.id=r.getInstanceId(),this.table=e,this.options=new n(t,e),this.wrapper=null,this.ownerDocument=e.ownerDocument,this.tableHeaders=[],this.dragHandlesContainer=null,this.originalWidths={},this.eventData=null,this.lastPointerDown=0,this.init(),this.table[a.dataPropertyname]=this}return r.prototype.init=function(){var e=this;this.createHandlerReferences(),this.validateMarkup(),this.wrapTable(),this.asignTableHeaders(),this.storeHeaderOriginalWidths(),this.setHeaderWidths(),this.createDragHandles(),this.restoreColumnWidths(),this.checkTableWidth(),this.syncHandleWidths();var t=this.ownerDocument.defaultView;a.events.windowResize.forEach(function(n,a){t.addEventListener(n,e.windowResizeHandlerRef,!1)})},r.prototype.dispose=function(){var e=this,t=this.ownerDocument.defaultView;a.events.windowResize.forEach(function(n,a){t.removeEventListener(n,e.windowResizeHandlerRef,!1)}),this.destroyDragHandles(),this.restoreHeaderOriginalWidths(),this.unwrapTable(),this.windowResizeHandlerRef=null,this.onPointerDownRef=null,this.onPointerMoveRef=null,this.onPointerUpRef=null,this.table[a.dataPropertyname]=void 0},r.prototype.validateMarkup=function(){for(var e,t=0,n=0,a=0;a<this.table.childNodes.length;a++){var i=this.table.childNodes[a];"THEAD"===i.nodeName?(t++,e=i):"TBODY"===i.nodeName&&n++}if(1!==t)throw"Markup validation: thead count.\nResizableTableColumns requires that the table element has one(1) table head element. Current count: "+t;if(1!==n)throw"Markup validation: tbody count.\nResizableTableColumns requires that the table element has one(1) table body element. Current count: "+n;for(var r=0,s=null,a=0;a<e.childNodes.length;a++){var i=e.childNodes[a];"TR"===i.nodeName&&(r++,null===s&&(s=i))}if(r<1)throw"Markup validation: thead row count.\nResizableTableColumns requires that the table head element has at least one(1) table row element. Current count: "+r;for(var o=0,l=0,a=0;a<s.childNodes.length;a++){var i=s.childNodes[a];"TH"===i.nodeName?o++:"TD"===i.nodeName&&l++}if(o<1)throw"Markup validation: thead first row cells count.\nResizableTableColumns requires that the table head's first row element has at least one(1) table header cell element. Current count: "+o;if(0!==l)throw"Markup validation: thead first row invalid.\nResizableTableColumns requires that the table head's first row element has no(0) table cell(TD) elements. Current count: "+l},r.prototype.wrapTable=function(){if(!this.wrapper){this.wrapper=this.ownerDocument.createElement("div");var e=this.table.parentNode;e.insertBefore(this.wrapper,this.table),e.removeChild(this.table),this.wrapper.appendChild(this.table),t.addClass(this.wrapper,a.classes.wrapper),t.addClass(this.table,a.classes.table)}},r.prototype.unwrapTable=function(){if(t.removeClass(this.table,a.classes.table),this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.table,this.wrapper),e.removeChild(this.wrapper),this.wrapper=null}},r.prototype.asignTableHeaders=function(){for(var e,t,n=0;n<this.table.childNodes.length;n++){var a=this.table.childNodes[n];if("THEAD"===a.nodeName){e=a;break}}for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if("TR"===a.nodeName){t=a;break}}for(var n=0;n<t.childNodes.length;n++){var a=t.childNodes[n];"TH"===a.nodeName&&this.tableHeaders.push(a)}},r.prototype.storeHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,n){if(t.hasAttribute(a.attibutes.dataResizable)){var i=t.getAttribute(a.attibutes.dataResizable);e.originalWidths["___."+i]=t.style.width}})},r.prototype.restoreHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,n){if(t.hasAttribute(a.attibutes.dataResizable)){var i=t.getAttribute(a.attibutes.dataResizable);t.style.width=e.originalWidths["___."+i]}})},r.prototype.setHeaderWidths=function(){var e=this;this.tableHeaders.forEach(function(n,a){var i=t.getWidth(n),s=e.constrainWidth(n,i);r.setWidth(n,s)})},r.prototype.constrainWidth=function(e,n){var a=n,i=this.options.obeyCssMinWidth?t.getMinCssWidth(e):null;null!=i&&(a=Math.max(i,a,this.options.minWidth));var r=this.options.obeyCssMaxWidth?t.getMaxCssWidth(e):null;return null!=r&&(a=Math.min(r,a,this.options.maxWidth)),a},r.prototype.createDragHandles=function(){var e=this;if(null!=this.dragHandlesContainer)throw"Drag handlers allready created. Call <destroyDragHandles> if you wish to recreate them";this.dragHandlesContainer=this.ownerDocument.createElement("div"),this.wrapper.insertBefore(this.dragHandlesContainer,this.table),t.addClass(this.dragHandlesContainer,a.classes.handleContainer),this.tableHeaders.forEach(function(n,i){if(n.hasAttribute(a.attibutes.dataResizable)){var r=e.ownerDocument.createElement("div");t.addClass(r,a.classes.handle),e.dragHandlesContainer.appendChild(r)}}),a.events.pointerDown.forEach(function(t,n){e.dragHandlesContainer.addEventListener(t,e.onPointerDownRef,!1)})},r.prototype.destroyDragHandles=function(){var e=this;null!==this.dragHandlesContainer&&(a.events.pointerDown.forEach(function(t,n){e.dragHandlesContainer.removeEventListener(t,e.onPointerDownRef,!1)}),this.dragHandlesContainer.parentElement.removeChild(this.dragHandlesContainer))},r.prototype.getDragHandlers=function(){var e=null==this.dragHandlesContainer?null:this.dragHandlesContainer.querySelectorAll("."+a.classes.handle);return e?Array.prototype.slice.call(e).filter(function(e){return"DIV"===e.nodeName}):new Array},r.prototype.restoreColumnWidths=function(){var e=this;this.options.store&&this.tableHeaders.forEach(function(t,n){if(t.hasAttribute(a.attibutes.dataResizable)){var i=e.options.store.get(e.generateColumnId(t));null!=i&&r.setWidth(t,i)}})},r.prototype.generateColumnId=function(e){var t=(e.getAttribute(a.attibutes.dataResizable)||"").trim().replace(/\./g,"_");return this.generateTableId()+"-"+t},r.prototype.generateTableId=function(){var e=(this.table.getAttribute(a.attibutes.dataResizableTable)||"").trim().replace(/\./g,"_");return 0===e.length?"rtc-table-"+this.id:e},r.prototype.checkTableWidth=function(){var e=t.getWidth(this.wrapper),n=t.getOuterWidth(this.table,!0),i=e-n;if(i>0){var s=0,o=0,l=0,h=[];this.tableHeaders.forEach(function(e,t){var n=r.getWidth(e);h.push(n),s+=n,e.hasAttribute(a.attibutes.dataResizable)&&(o+=n)}),r.setWidth(this.table,e);for(var d=0;d<this.tableHeaders.length;d++){var u=this.tableHeaders[d],c=h.shift();if(u.hasAttribute(a.attibutes.dataResizable)){var p=c+c/o*i,f=s+i-l;p=Math.min(p,f),p=Math.max(p,0);var b=this.constrainWidth(u,p);r.setWidth(u,b),l+=p}else l+=c;if(l>=s)break}}},r.prototype.syncHandleWidths=function(){var n=this,a=t.getWidth(this.table);r.setWidth(this.dragHandlesContainer,a),this.dragHandlesContainer.style.minWidth=a+"px";var i=this.getResizableHeaders();this.getDragHandlers().forEach(function(a,r){var s=t.getInnerHeight(n.options.resizeFromBody?n.table:n.table.tHead);if(r<i.length){var o=i[r],l=getComputedStyle(o),h=t.getOuterWidth(o);h-=e.parseStyleDimension(l.paddingLeft,!1),h-=e.parseStyleDimension(l.paddingRight,!1),h+=t.getOffset(o).left,h-=t.getOffset(n.dragHandlesContainer).left,a.style.left=h+"px",a.style.height=s+"px"}})},r.prototype.getResizableHeaders=function(){return this.tableHeaders.filter(function(e,t){return e.hasAttribute(a.attibutes.dataResizable)})},r.prototype.handlePointerDown=function(e){this.handlePointerUp(e);var n=e.target;if(null!=n&&"DIV"===n.nodeName&&t.hasClass(n,a.classes.handle)&&("number"!=typeof e.button||0===e.button)){var s=n,o=this.getDragHandlers().indexOf(s),l=this.getResizableHeaders();if(!(o>=l.length)){var h=(new Date).getTime(),d=h-this.lastPointerDown<this.options.doubleClickDelay,u=l[o],c=r.getWidth(u),p=r.getWidth(this.table),f=new i;f.column=u,f.dragHandler=s,f.pointer={x:this.getPointerX(e),isDoubleClick:d},f.originalWidths={column:c,table:p},this.detachHandlers(),this.attachHandlers(),t.addClass(this.table,a.classes.tableResizing),t.addClass(this.wrapper,a.classes.tableResizing),t.addClass(s,a.classes.columnResizing),t.addClass(u,a.classes.columnResizing),this.lastPointerDown=h,this.eventData=f;var b=new CustomEvent(a.events.eventResizeStart,{detail:{column:u,columnWidth:c,table:this.table,tableWidth:p}});this.table.dispatchEvent(b),e.preventDefault()}}},r.prototype.handlePointerMove=function(e){if(this.eventData){var t=this.getPointerX(e)-this.eventData.pointer.x;if(0!==t){var n=this.eventData.originalWidths.table+t,i=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+t);r.setWidth(this.table,n),r.setWidth(this.eventData.column,i),this.eventData.newWidths={column:i,table:n};var s=new CustomEvent(a.events.eventResize,{detail:{column:this.eventData.column,columnWidth:i,table:this.table,tableWidth:n}});this.table.dispatchEvent(s)}}},r.prototype.handlePointerUp=function(e){if(this.detachHandlers(),this.eventData){this.eventData.pointer.isDoubleClick&&this.handleDoubleClick(e),t.removeClass(this.table,a.classes.tableResizing),t.removeClass(this.wrapper,a.classes.tableResizing),t.removeClass(this.eventData.dragHandler,a.classes.columnResizing),t.removeClass(this.eventData.column,a.classes.columnResizing),this.checkTableWidth(),this.syncHandleWidths(),this.refreshWrapperStyle(),this.saveColumnWidths();var n=this.eventData.newWidths||this.eventData.originalWidths,i=new CustomEvent(a.events.eventResizeStop,{detail:{column:this.eventData.column,columnWidth:n.column,table:this.table,tableWidth:n.table}});this.table.dispatchEvent(i),this.eventData=null}},r.prototype.handleDoubleClick=function(e){if(this.eventData&&this.eventData.column){var n=this.eventData.column,i=this.tableHeaders.indexOf(n),s=0,o=[];this.tableHeaders.forEach(function(e,t){e.hasAttribute(a.attibutes.dataResizable)||o.push(t)});var l=this.ownerDocument.createElement("span");l.style.position="absolute",l.style.left="-99999px",l.style.top="-99999px",l.style.visibility="hidden",this.ownerDocument.body.appendChild(l);for(var h=this.table.querySelectorAll("tr"),d=0;d<h.length;d++)for(var u=h[d],c=u.querySelectorAll("td, th"),p=0,f=0;f<c.length;f++){var b=c[f],m=1;if(b.hasAttribute("colspan")){var v=b.getAttribute("colspan")||"1",g=parseInt(v);m=isNaN(g)?1:g}if(-1===o.indexOf(f)&&1===m&&p===i){s=Math.max(s,t.getTextWidth(b,l));break}p+=m}this.ownerDocument.body.removeChild(l);var y=s-t.getWidth(n);if(0!==y){var w=this.eventData.originalWidths.table+y,D=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+y);r.setWidth(this.table,w),r.setWidth(this.eventData.column,D),this.eventData.newWidths={column:D,table:w};var C=new CustomEvent(a.events.eventResize,{detail:{column:this.eventData.column,columnWidth:D,table:this.table,tableWidth:w}});this.table.dispatchEvent(C)}}},r.prototype.getPointerX=function(e){return 0===e.type.indexOf("touch")?(e.touches[0]||e.changedTouches[0]).pageX:e.pageX},r.prototype.attachHandlers=function(){var e=this;a.events.pointerMove.forEach(function(t,n){e.ownerDocument.addEventListener(t,e.onPointerMoveRef,!1)}),a.events.pointerUp.forEach(function(t,n){e.ownerDocument.addEventListener(t,e.onPointerUpRef,!1)})},r.prototype.detachHandlers=function(){var e=this;a.events.pointerMove.forEach(function(t,n){e.ownerDocument.removeEventListener(t,e.onPointerMoveRef,!1)}),a.events.pointerUp.forEach(function(t,n){e.ownerDocument.removeEventListener(t,e.onPointerUpRef,!1)})},r.prototype.refreshWrapperStyle=function(){if(null!=this.wrapper){var e=this.wrapper.style.overflowX;this.wrapper.style.overflowX="hidden",this.wrapper.style.overflowX=e}},r.prototype.saveColumnWidths=function(){var t=this;this.options.store&&this.getResizableHeaders().forEach(function(n,a){t.options.store.set(t.generateColumnId(n),e.parseStyleDimension(n.style.width,!1))})},r.prototype.createHandlerReferences=function(){var e=this;this.windowResizeHandlerRef||(this.windowResizeHandlerRef=function(){e.checkTableWidth(),e.syncHandleWidths()}),this.onPointerDownRef||(this.onPointerDownRef=function(t){e.handlePointerDown(t)}),this.onPointerMoveRef||(this.onPointerMoveRef=function(t){e.handlePointerMove(t)}),this.onPointerUpRef||(this.onPointerUpRef=function(t){e.handlePointerUp(t)})},r.getWidth=function(n){if(n)return""===n.style.width?t.getWidth(n):e.parseStyleDimension(n.style.width,!1)},r.setWidth=function(e,t){var n=t.toFixed(2);n=t>0?n:"0",e.style.width=n+"px"},r.getInstanceId=function(){return r.instancesCount++},r.instancesCount=0,r}()}();