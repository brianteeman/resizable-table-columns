var ResizableTableColumns=function(){"use strict";var e=function(){function e(){}return e.escapeRegExp=function(t){return t.replace(e.regexEscapeRegex,"\\$&")},e.kebabCaseToCamelCase=function(t){return t.replace(e.kebabCaseRegex,function(e){return e[1].toUpperCase()})},e.parseStringToType=function(t){if(0==t.length||e.onlyWhiteSpace.test(t))return t;if(e.trueRegex.test(t))return!0;if(e.falseRegex.test(t))return!1;if(e.notEmptyOrWhiteSpace.test(t)){var a=+t;if(!isNaN(a))return a}return t},e.parseStyleDimension=function(e,t){if("string"==typeof e){if(e.length){var a=e.replace("px","").replace(",","."),n=parseFloat(a);if(!isNaN(n))return n}}else if("number"==typeof e)return e;return t?e:0},e.regexEscapeRegex=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,e.kebabCaseRegex=/(\-\w)/g,e.trueRegex=/^true$/i,e.falseRegex=/^false$/i,e.onlyWhiteSpace=/^\s$/,e.notEmptyOrWhiteSpace=/\S/,e}(),t=function(){function t(){}return t.addClass=function(e,a){e.classList?e.classList.add(a):t.hasClass(e,a)||(e.className+=" "+a)},t.removeClass=function(a,n){if(a.classList)a.classList.remove(n);else if(t.hasClass(a,n)){var i=new RegExp("(\\s|^)"+e.escapeRegExp(n)+"(\\s|$)");a.className=a.className.replace(i," ")}},t.hasClass=function(t,a){return t.classList?t.classList.contains(a):!!t.className.match(new RegExp("(\\s|^)"+e.escapeRegExp(a)+"(\\s|$)"))},t.getDataAttributesValues=function(t){if(!t)return null;var a={};if(t.dataset)for(var n in t.dataset)t.dataset.hasOwnProperty(n)&&(a[n]=e.parseStringToType(t.dataset[n]));else for(var i=0;i<t.attributes.length;i++)if(/^data\-/.test(t.attributes[i].name)){var s=e.kebabCaseToCamelCase(t.attributes[i].name.replace("data-",""));a[s]=e.parseStringToType(t.attributes[i].value)}return a},t.getMinCssWidth=function(t){var a=t.ownerDocument.defaultView.getComputedStyle(t).minWidth,n=e.parseStyleDimension(a,!0);return"number"!=typeof n||isNaN(n)?null:n},t.getMaxCssWidth=function(t){var a=t.ownerDocument.defaultView.getComputedStyle(t).maxWidth,n=e.parseStyleDimension(a,!0);return"number"!=typeof n||isNaN(n)?null:n},t.getOuterWidth=function(t,a){void 0===a&&(a=!1);var n=t.offsetWidth;if(!a)return n;var i=t.ownerDocument.defaultView.getComputedStyle(t);return n+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerWidth=function(a){var n=t.getOuterWidth(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return n-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getWidth=function(a){var n=t.getOuterWidth(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return n-e.parseStyleDimension(i.paddingLeft,!1)-e.parseStyleDimension(i.paddingRight,!1)-e.parseStyleDimension(i.borderLeft,!1)-e.parseStyleDimension(i.borderRight,!1)},t.getOuterHeight=function(t,a){void 0===a&&(a=!1);var n=t.offsetHeight;if(!a)return n;var i=t.ownerDocument.defaultView.getComputedStyle(t);return n+e.parseStyleDimension(i.marginTop,!1)+e.parseStyleDimension(i.marginBottom,!1)},t.getInnerHeight=function(a){var n=t.getOuterHeight(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return n-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getHeight=function(a){var n=t.getOuterHeight(a),i=a.ownerDocument.defaultView.getComputedStyle(a);return n-e.parseStyleDimension(i.paddingTop,!1)-e.parseStyleDimension(i.paddingBottom,!1)-e.parseStyleDimension(i.borderTop,!1)-e.parseStyleDimension(i.borderBottom,!1)},t.getOffset=function(e){var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},t.matches=function(e,t){for(var a,n=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],i=0;i<n.length;i++)if("function"==typeof e.ownerDocument.body[n[i]]){a=n[i];break}return e[a](t)},t.closest=function(e,a){if(!e)return null;if("function"==typeof e.closest)return e.closest(a);for(var n=e;n&&1===n.nodeType;){if(t.matches(n,a))return n;n=n.parentNode}return null},t.getTextWidth=function(e,a){if(!e||!a)return 0;var n=e.textContent.trim().replace(/\s/g,"&nbsp;")+"&nbsp;",i=e.ownerDocument.defaultView.getComputedStyle(e);return["fontFamily","fontSize","fontWeight","padding","border"].forEach(function(e){a.style[e]=i[e]}),a.innerHTML=n,t.getOuterWidth(a,!0)},t}(),a=function(){function e(e,t){this.resizeFromBody=!0,this.minWidth=40,this.maxWidth=null,this.obeyCssMinWidth=!1,this.obeyCssMaxWidth=!1,this.doubleClickDelay=500,this.store=null,this.overrideValues(e),this.overrideValuesFromElement(t)}return e.prototype.overrideValues=function(e){if(e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.overrideValuesFromElement=function(e){if(e){var a=t.getDataAttributesValues(e);this.overrideValues(a)}},e}(),n=function(){function e(){}return e.dataPropertyname="rtc_data_object",e.classes={table:"rtc-table",wrapper:"rtc-wrapper",handleContainer:"rtc-handle-container",handle:"rtc-handle",hidden:"rtc-hidden",tableResizing:"rtc-table-resizing",columnResizing:"rtc-column-resizing"},e.attibutes={dataResizable:"data-rtc-resizable",dataResizableTable:"data-rtc-resizable-table"},e.data={resizable:"rtcResizable",resizableTable:"rtcResizableTable"},e.events={pointerDown:["mousedown","touchstart"],pointerMove:["mousemove","touchmove"],pointerUp:["mouseup","touchend"],windowResize:["resize"],eventResizeStart:"eventResizeStart.rtc",eventResize:"eventResize.rtc",eventResizeStop:"eventResizeStop.rtc"},e}(),i=function(){function e(){}return e}();return function(){function s(e,t){if("object"!=typeof e||null===e||"[object HTMLTableElement]"!==e.toString())throw'Invalid argument: "table".\nResizableTableColumns requires that the table element is a not null HTMLTableElement object!';if(void 0!==e[n.dataPropertyname])throw'Existing "'+n.dataPropertyname+"\" property.\nTable elemet already has a '"+n.dataPropertyname+"' attached object!";this.id=s.getInstanceId(),this.table=e,this.options=new a(t,e),this.wrapper=null,this.ownerDocument=e.ownerDocument,this.tableHeaders=[],this.dragHandlesContainer=null,this.originalWidths={},this.eventData=null,this.lastPointerDown=0,this.init(),this.table[n.dataPropertyname]=this}return s.prototype.init=function(){var e=this;this.validateMarkup(),this.wrapTable(),this.asignTableHeaders(),this.storeHeaderOriginalWidths(),this.setHeaderWidths(),this.createDragHandles(),this.restoreColumnWidths(),this.checkTableWidth(),this.syncHandleWidths(),this.windowResizeHandler=function(){e.checkTableWidth(),e.syncHandleWidths()};var t=this.ownerDocument.defaultView;n.events.windowResize.forEach(function(a,n){t.addEventListener(a,e.windowResizeHandler,!1)})},s.prototype.dispose=function(){var e=this,t=this.ownerDocument.defaultView;n.events.windowResize.forEach(function(a,n){t.removeEventListener(a,e.windowResizeHandler,!1)}),this.destroyDragHandles(),this.restoreHeaderOriginalWidths(),this.unwrapTable(),this.table[n.dataPropertyname]=void 0},s.prototype.validateMarkup=function(){for(var e,t=0,a=0,n=0;n<this.table.childNodes.length;n++){var i=this.table.childNodes[n];"THEAD"===i.nodeName?(t++,e=i):"TBODY"===i.nodeName&&a++}if(1!==t)throw"Markup validation: thead count.\nResizableTableColumns requires that the table element has one(1) table head element. Current count: "+t;if(1!==a)throw"Markup validation: tbody count.\nResizableTableColumns requires that the table element has one(1) table body element. Current count: "+a;for(var s=0,r=null,n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];"TR"===i.nodeName&&(s++,null===r&&(r=i))}if(s<1)throw"Markup validation: thead row count.\nResizableTableColumns requires that the table head element has at least one(1) table row element. Current count: "+s;for(var o=0,l=0,n=0;n<r.childNodes.length;n++){var i=r.childNodes[n];"TH"===i.nodeName?o++:"TD"===i.nodeName&&l++}if(o<1)throw"Markup validation: thead first row cells count.\nResizableTableColumns requires that the table head's first row element has at least one(1) table header cell element. Current count: "+o;if(0!==l)throw"Markup validation: thead first row invalid.\nResizableTableColumns requires that the table head's first row element has no(0) table cell(TD) elements. Current count: "+l},s.prototype.wrapTable=function(){if(!this.wrapper){this.wrapper=this.ownerDocument.createElement("div");var e=this.table.parentNode;e.insertBefore(this.wrapper,this.table),e.removeChild(this.table),this.wrapper.appendChild(this.table),t.addClass(this.wrapper,n.classes.wrapper),t.addClass(this.table,n.classes.table)}},s.prototype.unwrapTable=function(){if(t.removeClass(this.table,n.classes.table),this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.table,this.wrapper),e.removeChild(this.wrapper),this.wrapper=null}},s.prototype.asignTableHeaders=function(){for(var e,t,a=0;a<this.table.childNodes.length;a++){var n=this.table.childNodes[a];if("THEAD"===n.nodeName){e=n;break}}for(var a=0;a<e.childNodes.length;a++){var n=e.childNodes[a];if("TR"===n.nodeName){t=n;break}}for(var a=0;a<t.childNodes.length;a++){var n=t.childNodes[a];"TH"===n.nodeName&&this.tableHeaders.push(n)}},s.prototype.storeHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(n.attibutes.dataResizable)){var i=t.getAttribute(n.attibutes.dataResizable);e.originalWidths["___."+i]=t.style.width}})},s.prototype.restoreHeaderOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(n.attibutes.dataResizable)){var i=t.getAttribute(n.attibutes.dataResizable);t.style.width=e.originalWidths["___."+i]}})},s.prototype.setHeaderWidths=function(){var e=this;this.tableHeaders.forEach(function(a,i){if(a.hasAttribute(n.attibutes.dataResizable)){var r=t.getWidth(a),o=e.constrainWidth(a,r);s.setWidth(a,o)}})},s.prototype.constrainWidth=function(e,a){var n=a,i=this.options.obeyCssMinWidth?t.getMinCssWidth(e):null;null!=i&&(n=Math.max(i,n,this.options.minWidth));var s=this.options.obeyCssMaxWidth?t.getMaxCssWidth(e):null;return null!=s&&(n=Math.min(s,n,this.options.maxWidth)),n},s.prototype.createDragHandles=function(){var e=this;if(null!=this.dragHandlesContainer)throw"Drag handlers allready created. Call <destroyDragHandles> if you wish to recreate them";this.dragHandlesContainer=this.ownerDocument.createElement("div"),this.wrapper.insertBefore(this.dragHandlesContainer,this.table),t.addClass(this.dragHandlesContainer,n.classes.handleContainer),this.tableHeaders.forEach(function(a,i){if(a.hasAttribute(n.attibutes.dataResizable)){var s=e.ownerDocument.createElement("div");t.addClass(s,n.classes.handle),e.dragHandlesContainer.appendChild(s)}}),n.events.pointerDown.forEach(function(t,a){e.dragHandlesContainer.addEventListener(t,s.onPointerDown,!1)})},s.prototype.destroyDragHandles=function(){var e=this;null!==this.dragHandlesContainer&&(n.events.pointerDown.forEach(function(t,a){e.dragHandlesContainer.removeEventListener(t,s.onPointerDown,!1)}),this.dragHandlesContainer.parentElement.removeChild(this.dragHandlesContainer))},s.prototype.getDragHandlers=function(){var e=null==this.dragHandlesContainer?null:this.dragHandlesContainer.querySelectorAll("."+n.classes.handle);return e?Array.prototype.slice.call(e).filter(function(e){return"DIV"===e.nodeName}):new Array},s.prototype.restoreColumnWidths=function(){var e=this;this.options.store&&this.tableHeaders.forEach(function(t,a){if(t.hasAttribute(n.attibutes.dataResizable)){var i=e.options.store.get(e.generateColumnId(t));null!=i&&s.setWidth(t,i)}})},s.prototype.generateColumnId=function(e){var t=(e.getAttribute(n.attibutes.dataResizable)||"").trim().replace(/\./g,"_");return this.generateTableId()+"-"+t},s.prototype.generateTableId=function(){var e=(this.table.getAttribute(n.attibutes.dataResizableTable)||"").trim().replace(/\./g,"_");return 0===e.length?"rtc-table-"+this.id:e},s.prototype.checkTableWidth=function(){t.addClass(this.table,n.classes.hidden),t.addClass(this.dragHandlesContainer,n.classes.hidden);var e=t.getWidth(this.wrapper);t.removeClass(this.table,n.classes.hidden),t.removeClass(this.dragHandlesContainer,n.classes.hidden);var a=t.getOuterWidth(this.table,!0),i=e-a;if(i>0){var r=0,o=0,l=0,h=[];this.tableHeaders.forEach(function(e,a){var i=t.getWidth(e);h.push(i),r+=i,e.hasAttribute(n.attibutes.dataResizable)&&(o+=i)}),s.setWidth(this.table,e);for(var d=0;d<this.tableHeaders.length;d++){var u=this.tableHeaders[d],c=h.shift();if(u.hasAttribute(n.attibutes.dataResizable)){var p=c+c/o*i,f=r+i-l;p=Math.min(p,f),p=Math.max(p,0);var b=this.constrainWidth(u,p);s.setWidth(u,b),l+=p}else l+=c;if(l>=r)break}}},s.prototype.syncHandleWidths=function(){var a=this,n=t.getWidth(this.table);s.setWidth(this.dragHandlesContainer,n),this.dragHandlesContainer.style.minWidth=n+"px";var i=this.getResizableHeaders();this.getDragHandlers().forEach(function(n,s){var r=t.getInnerHeight(a.options.resizeFromBody?a.table:a.table.tHead);if(s<i.length){var o=i[s],l=getComputedStyle(o),h=t.getOuterWidth(o);h-=e.parseStyleDimension(l.paddingLeft,!1),h-=e.parseStyleDimension(l.paddingRight,!1),h+=t.getOffset(o).left,h-=t.getOffset(a.dragHandlesContainer).left,n.style.left=h+"px",n.style.height=r+"px"}})},s.prototype.getResizableHeaders=function(){return this.tableHeaders.filter(function(e,t){return e.hasAttribute(n.attibutes.dataResizable)})},s.prototype.handlePointerDown=function(e,a){var s=this.getDragHandlers().indexOf(e),r=this.getResizableHeaders();if(!(s>=r.length)){var o=(new Date).getTime(),l=o-this.lastPointerDown<this.options.doubleClickDelay,h=r[s],d=t.getWidth(h),u=t.getWidth(this.table),c=new i;c.column=h,c.dragHandler=e,c.pointer={x:this.getPointerX(a),isDoubleClick:l},c.originalWidths={column:d,table:u},this.detachHandlers(),this.attachHandlers(),t.addClass(this.table,n.classes.tableResizing),t.addClass(this.wrapper,n.classes.tableResizing),t.addClass(e,n.classes.columnResizing),t.addClass(h,n.classes.columnResizing),this.lastPointerDown=o,this.eventData=c;var p=new CustomEvent(n.events.eventResizeStart,{detail:{column:h,columnWidth:d,table:this.table,tableWidth:u}});this.table.dispatchEvent(p),a.preventDefault()}},s.prototype.handlePointerMove=function(e){if(this.eventData){var t=this.getPointerX(e)-this.eventData.pointer.x;if(0!==t){var a=this.eventData.originalWidths.table+t,i=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+t);s.setWidth(this.table,a),s.setWidth(this.eventData.column,i),this.eventData.newWidths={column:i,table:a};var r=new CustomEvent(n.events.eventResize,{detail:{column:this.eventData.column,columnWidth:i,table:this.table,tableWidth:a}});this.table.dispatchEvent(r)}}},s.prototype.handlePointerUp=function(e){if(this.detachHandlers(),this.eventData){this.eventData.pointer.isDoubleClick&&this.handleDoubleClick(e),t.removeClass(this.table,n.classes.tableResizing),t.removeClass(this.wrapper,n.classes.tableResizing),t.removeClass(this.eventData.dragHandler,n.classes.columnResizing),t.removeClass(this.eventData.column,n.classes.columnResizing),this.checkTableWidth(),this.syncHandleWidths(),this.refreshWrapperStyle(),this.saveColumnWidths();var a=this.eventData.newWidths||this.eventData.originalWidths,i=new CustomEvent(n.events.eventResizeStop,{detail:{column:this.eventData.column,columnWidth:a.column,table:this.table,tableWidth:a.table}});this.table.dispatchEvent(i),this.eventData=null}},s.prototype.handleDoubleClick=function(e){if(this.eventData&&this.eventData.column){var a=this.eventData.column,i=this.tableHeaders.indexOf(a),r=0,o=[];this.tableHeaders.forEach(function(e,t){e.hasAttribute(n.attibutes.dataResizable)||o.push(t)});var l=this.ownerDocument.createElement("span");l.style.position="absolute",l.style.left="-99999px",l.style.top="-99999px",l.style.visibility="hidden",this.ownerDocument.body.appendChild(l);for(var h=this.table.querySelectorAll("tr"),d=0;d<h.length;d++)for(var u=h[d],c=u.querySelectorAll("td, th"),p=0,f=0;f<c.length;f++){var b=c[f],v=1;if(b.hasAttribute("colspan")){var m=b.getAttribute("colspan")||"1",g=parseInt(m);v=isNaN(g)?1:g}if(-1===o.indexOf(f)&&1===v&&p===i){r=Math.max(r,t.getTextWidth(b,l));break}p+=v}this.ownerDocument.body.removeChild(l);var y=r-t.getWidth(a);if(0!==y){var w=this.eventData.originalWidths.table+y,C=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+y);s.setWidth(this.table,w),s.setWidth(this.eventData.column,C),this.eventData.newWidths={column:C,table:w};var D=new CustomEvent(n.events.eventResize,{detail:{column:this.eventData.column,columnWidth:C,table:this.table,tableWidth:w}});this.table.dispatchEvent(D)}}},s.prototype.getPointerX=function(e){return 0===e.type.indexOf("touch")?(e.touches[0]||e.changedTouches[0]).pageX:e.pageX},s.prototype.attachHandlers=function(){var e=this;n.events.pointerMove.forEach(function(t,a){e.ownerDocument.addEventListener(t,s.onPointerMove,!1)}),n.events.pointerUp.forEach(function(t,a){e.ownerDocument.addEventListener(t,s.onPointerUp,!1)})},s.prototype.detachHandlers=function(){var e=this;n.events.pointerMove.forEach(function(t,a){e.ownerDocument.removeEventListener(t,s.onPointerMove,!1)}),n.events.pointerUp.forEach(function(t,a){e.ownerDocument.removeEventListener(t,s.onPointerUp,!1)})},s.prototype.refreshWrapperStyle=function(){if(null!=this.wrapper){var e=this.wrapper.style.overflowX;this.wrapper.style.overflowX="hidden",this.wrapper.style.overflowX=e}},s.prototype.saveColumnWidths=function(){var e=this;this.options.store&&this.getResizableHeaders().forEach(function(a,n){e.options.store.set(e.generateColumnId(a),t.getWidth(a))})},s.setWidth=function(e,t){var a=t.toFixed(2);a=t>0?a:"0",e.style.width=a+"px"},s.getInstanceId=function(){return s.instancesCount++},s.onPointerDown=function(e){var a=s.getResizableObject(event);if(a){a.handlePointerUp(event);var i=e.target;null!=i&&"DIV"===i.nodeName&&t.hasClass(i,n.classes.handle)&&("number"==typeof e.button&&0!==e.button||a.handlePointerDown(i,e))}},s.onPointerMove=function(e){var t=s.getResizableObject(event);t&&t.handlePointerMove(event)},s.onPointerUp=function(e){var t=s.getResizableObject(event);t&&t.handlePointerUp(event)},s.getResizableObject=function(e){if(!e)return null;var a=e.target;if(null==a)return null;var i=t.closest(a,"div."+n.classes.wrapper);if(!i)return null;var s=i.querySelector("table."+n.classes.table);return s?s[n.dataPropertyname]||null:null},s.instancesCount=0,s}()}();