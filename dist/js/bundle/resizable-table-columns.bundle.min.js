var ResizableTableColumns=function(){"use strict";var e=function(){function e(){}return e.escapeRegExp=function(t){return t.replace(e.regexEscapeRegex,"\\$&")},e.kebabCaseToCamelCase=function(t){return t.replace(e.kebabCaseRegex,function(e){return e[1].toUpperCase()})},e.parseStringToType=function(t){if(0==t.length||e.onlyWhiteSpace.test(t))return t;if(e.trueRegex.test(t))return!0;if(e.falseRegex.test(t))return!1;if(e.notEmptyOrWhiteSpace.test(t)){var n=+t;if(!isNaN(n))return n}return t},e.parseStyleDimension=function(e,t){if("string"==typeof e){if(e.length){var n=e.replace("px","").replace(",","."),i=parseFloat(n);if(!isNaN(i))return i}}else if("number"==typeof e)return e;return t?e:0},e.regexEscapeRegex=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,e.kebabCaseRegex=/(\-\w)/g,e.trueRegex=/^true$/i,e.falseRegex=/^false$/i,e.onlyWhiteSpace=/^\s$/,e.notEmptyOrWhiteSpace=/\S/,e}(),t=function(){function t(){}return t.addClass=function(e,n){e.classList?e.classList.add(n):t.hasClass(e,n)||(e.className+=" "+n)},t.removeClass=function(n,i){if(n.classList)n.classList.remove(i);else if(t.hasClass(n,i)){var a=new RegExp("(\\s|^)"+e.escapeRegExp(i)+"(\\s|$)");n.className=n.className.replace(a," ")}},t.hasClass=function(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+e.escapeRegExp(n)+"(\\s|$)"))},t.getDataAttributesValues=function(t){if(!t)return null;var n={};if(t.dataset)for(var i in t.dataset)t.dataset.hasOwnProperty(i)&&(n[i]=e.parseStringToType(t.dataset[i]));else for(var a=0;a<t.attributes.length;a++)if(/^data\-/.test(t.attributes[a].name)){var r=e.kebabCaseToCamelCase(t.attributes[a].name.replace("data-",""));n[r]=e.parseStringToType(t.attributes[a].value)}return n},t.getMinCssWidth=function(t){var n=t.ownerDocument.defaultView.getComputedStyle(t).minWidth,i=e.parseStyleDimension(n,!0);return"number"!=typeof i||isNaN(i)?null:i},t.getMaxCssWidth=function(t){var n=t.ownerDocument.defaultView.getComputedStyle(t).maxWidth,i=e.parseStyleDimension(n,!0);return"number"!=typeof i||isNaN(i)?null:i},t.getOuterWidth=function(t,n){void 0===n&&(n=!1);var i=t.offsetWidth;if(!n)return i;var a=t.ownerDocument.defaultView.getComputedStyle(t);return i+e.parseStyleDimension(a.marginTop,!1)+e.parseStyleDimension(a.marginBottom,!1)},t.getInnerWidth=function(n){var i=t.getOuterWidth(n),a=n.ownerDocument.defaultView.getComputedStyle(n);return i-e.parseStyleDimension(a.borderLeft,!1)-e.parseStyleDimension(a.borderRight,!1)},t.getWidth=function(n){var i=t.getOuterWidth(n),a=n.ownerDocument.defaultView.getComputedStyle(n);return i-e.parseStyleDimension(a.paddingLeft,!1)-e.parseStyleDimension(a.paddingRight,!1)-e.parseStyleDimension(a.borderLeft,!1)-e.parseStyleDimension(a.borderRight,!1)},t.getOuterHeight=function(t,n){void 0===n&&(n=!1);var i=t.offsetHeight;if(!n)return i;var a=t.ownerDocument.defaultView.getComputedStyle(t);return i+e.parseStyleDimension(a.marginTop,!1)+e.parseStyleDimension(a.marginBottom,!1)},t.getInnerHeight=function(n){var i=t.getOuterHeight(n),a=n.ownerDocument.defaultView.getComputedStyle(n);return i-e.parseStyleDimension(a.borderTop,!1)-e.parseStyleDimension(a.borderBottom,!1)},t.getHeight=function(n){var i=t.getOuterHeight(n),a=n.ownerDocument.defaultView.getComputedStyle(n);return i-e.parseStyleDimension(a.paddingTop,!1)-e.parseStyleDimension(a.paddingBottom,!1)-e.parseStyleDimension(a.borderTop,!1)-e.parseStyleDimension(a.borderBottom,!1)},t.getOffset=function(e){if(!e)return null;var t=e.getBoundingClientRect();return{top:t.top+e.ownerDocument.body.scrollTop,left:t.left+e.ownerDocument.body.scrollLeft}},t.matches=function(e,t){for(var n,i=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],a=0;a<i.length;a++)if("function"==typeof e.ownerDocument.body[i[a]]){n=i[a];break}return e[n](t)},t.closest=function(e,n){if(!e)return null;if("function"==typeof e.closest)return e.closest(n);for(var i=e;i&&1===i.nodeType;){if(t.matches(i,n))return i;i=i.parentNode}return null},t.getPointerX=function(e){return 0===e.type.indexOf("touch")?(e.touches[0]||e.changedTouches[0]).pageX:e.pageX},t.getTextWidth=function(e,n){if(!e||!n)return 0;var i=e.textContent.trim().replace(/\s/g,"&nbsp;")+"&nbsp;",a=e.ownerDocument.defaultView.getComputedStyle(e);return["fontFamily","fontSize","fontWeight","padding","border"].forEach(function(e){n.style[e]=a[e]}),n.innerHTML=i,t.getOuterWidth(n,!0)},t}(),n=function(){function e(e,t){this.resizeFromBody=!0,this.minWidth=40,this.maxWidth=null,this.obeyCssMinWidth=!1,this.obeyCssMaxWidth=!1,this.doubleClickDelay=500,this.store=null,this.overrideValues(e),this.overrideValuesFromElement(t)}return e.prototype.overrideValues=function(e){if(e)for(var t in e)this.hasOwnProperty(t)&&(this[t]=e[t])},e.prototype.overrideValuesFromElement=function(e){if(e){var n=t.getDataAttributesValues(e);this.overrideValues(n)}},e}(),i=function(){function e(){}return e.dataPropertyname="rtc_data_object",e.classes={table:"rtc-table",wrapper:"rtc-wrapper",handleContainer:"rtc-handle-container",handle:"rtc-handle",tableResizing:"rtc-table-resizing",columnResizing:"rtc-column-resizing"},e.attibutes={dataResizable:"data-rtc-resizable",dataResizableTable:"data-rtc-resizable-table"},e.data={resizable:"rtcResizable",resizableTable:"rtcResizableTable"},e.events={pointerDown:["mousedown","touchstart"],pointerMove:["mousemove","touchmove"],pointerUp:["mouseup","touchend"],windowResize:["resize"],eventResizeStart:"eventResizeStart.rtc",eventResize:"eventResize.rtc",eventResizeStop:"eventResizeStop.rtc"},e}(),a=function(){function e(){}return e}();return function(){function r(e,t){if("object"!=typeof e||null===e||"[object HTMLTableElement]"!==e.toString())throw'Invalid argument: "table".\nResizableTableColumns requires that the table element is a not null HTMLTableElement object!';if(void 0!==e[i.dataPropertyname])throw'Existing "'+i.dataPropertyname+"\" property.\nTable elemet already has a '"+i.dataPropertyname+"' attached object!";this.id=r.getInstanceId(),this.table=e,this.options=new n(t,e),this.wrapper=null,this.ownerDocument=e.ownerDocument,this.tableHeaders=[],this.dragHandlesContainer=null,this.originalWidths={},this.eventData=null,this.lastPointerDown=0,this.init(),this.table[i.dataPropertyname]=this}return r.prototype.init=function(){this.validateMarkup(),this.createHandlerReferences(),this.wrapTable(),this.asignTableHeaders(),this.storeOriginalWidths(),this.setHeaderWidths(),this.createDragHandles(),this.restoreColumnWidths(),this.checkTableWidth(),this.syncHandleWidths(),this.registerWindowResizeHandler()},r.prototype.dispose=function(){this.destroyDragHandles(),this.restoreOriginalWidths(),this.unwrapTable(),this.onPointerDownRef=null,this.onPointerMoveRef=null,this.onPointerUpRef=null,this.table[i.dataPropertyname]=void 0},r.prototype.validateMarkup=function(){for(var e,t=0,n=0,i=0;i<this.table.childNodes.length;i++){var a=this.table.childNodes[i];"THEAD"===a.nodeName?(t++,e=a):"TBODY"===a.nodeName&&n++}if(1!==t)throw"Markup validation: thead count.\nResizableTableColumns requires that the table element has one(1) table head element. Current count: "+t;if(1!==n)throw"Markup validation: tbody count.\nResizableTableColumns requires that the table element has one(1) table body element. Current count: "+n;for(var r=0,s=null,i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];"TR"===a.nodeName&&(r++,null===s&&(s=a))}if(r<1)throw"Markup validation: thead row count.\nResizableTableColumns requires that the table head element has at least one(1) table row element. Current count: "+r;for(var o=0,l=0,i=0;i<s.childNodes.length;i++){var a=s.childNodes[i];"TH"===a.nodeName?o++:"TD"===a.nodeName&&l++}if(o<1)throw"Markup validation: thead first row cells count.\nResizableTableColumns requires that the table head's first row element has at least one(1) table header cell element. Current count: "+o;if(0!==l)throw"Markup validation: thead first row invalid.\nResizableTableColumns requires that the table head's first row element has no(0) table cell(TD) elements. Current count: "+l},r.prototype.wrapTable=function(){if(!this.wrapper){this.wrapper=this.ownerDocument.createElement("div");var e=this.table.parentNode;e.insertBefore(this.wrapper,this.table),e.removeChild(this.table),this.wrapper.appendChild(this.table),t.addClass(this.wrapper,i.classes.wrapper),t.addClass(this.table,i.classes.table)}},r.prototype.unwrapTable=function(){if(t.removeClass(this.table,i.classes.table),this.wrapper){var e=this.wrapper.parentNode;e.insertBefore(this.table,this.wrapper),e.removeChild(this.wrapper),this.wrapper=null}},r.prototype.asignTableHeaders=function(){for(var e,t,n=0;n<this.table.childNodes.length;n++){var i=this.table.childNodes[n];if("THEAD"===i.nodeName){e=i;break}}for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if("TR"===i.nodeName){t=i;break}}for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];"TH"===i.nodeName&&this.tableHeaders.push(i)}},r.prototype.storeOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,n){e.originalWidths["___."+n]=t.style.width}),this.originalWidths["___.table"]=this.table.style.width},r.prototype.restoreOriginalWidths=function(){var e=this;this.tableHeaders.forEach(function(t,n){t.style.width=e.originalWidths["___."+n]}),this.table.style.width=this.originalWidths["___.table"]},r.prototype.setHeaderWidths=function(){var e=this;this.tableHeaders.forEach(function(n,i){var a=t.getWidth(n),s=e.constrainWidth(n,a);r.setWidth(n,s)})},r.prototype.constrainWidth=function(e,n){var i=n,a=this.options.obeyCssMinWidth?t.getMinCssWidth(e):-1/0;i=Math.max(i,a,this.options.minWidth||-1/0);var r=this.options.obeyCssMaxWidth?t.getMaxCssWidth(e):1/0;return i=Math.min(i,r,this.options.maxWidth||1/0)},r.prototype.createDragHandles=function(){var e=this;if(null!=this.dragHandlesContainer)throw"Drag handlers allready created. Call <destroyDragHandles> if you wish to recreate them";this.dragHandlesContainer=this.ownerDocument.createElement("div"),this.wrapper.insertBefore(this.dragHandlesContainer,this.table),t.addClass(this.dragHandlesContainer,i.classes.handleContainer),this.getResizableHeaders().forEach(function(n,a){var r=e.ownerDocument.createElement("div");t.addClass(r,i.classes.handle),e.dragHandlesContainer.appendChild(r)}),i.events.pointerDown.forEach(function(t,n){e.dragHandlesContainer.addEventListener(t,e.onPointerDownRef,!1)})},r.prototype.destroyDragHandles=function(){var e=this;null!==this.dragHandlesContainer&&(i.events.pointerDown.forEach(function(t,n){e.dragHandlesContainer.removeEventListener(t,e.onPointerDownRef,!1)}),this.dragHandlesContainer.parentElement.removeChild(this.dragHandlesContainer))},r.prototype.getDragHandlers=function(){var e=null==this.dragHandlesContainer?null:this.dragHandlesContainer.querySelectorAll("."+i.classes.handle);return e?Array.prototype.slice.call(e).filter(function(e){return"DIV"===e.nodeName}):new Array},r.prototype.restoreColumnWidths=function(){if(this.options.store){var e=r.generateTableId(this.table);if(0!==e.length){var t=this.options.store.get(e);t&&(this.getResizableHeaders().forEach(function(e,n){var i=t.columns[r.generateColumnId(e)];void 0!==i&&r.setWidth(e,i)}),void 0!==t.table&&r.setWidth(this.table,t.table))}}},r.prototype.checkTableWidth=function(){var e=t.getWidth(this.wrapper),n=t.getOuterWidth(this.table,!0),a=e-n;if(a>0){var s=0,o=0,l=0,h=[];this.tableHeaders.forEach(function(e,t){var n=r.getWidth(e);h.push(n),s+=n,e.hasAttribute(i.attibutes.dataResizable)&&(o+=n)}),r.setWidth(this.table,e);for(var d=0;d<this.tableHeaders.length;d++){var u=this.tableHeaders[d],c=h.shift();if(u.hasAttribute(i.attibutes.dataResizable)){var p=c+c/o*a,f=s+a-l;p=Math.min(p,f),p=Math.max(p,0);var b=this.constrainWidth(u,p);r.setWidth(u,b),l+=p}else l+=c;if(l>=s)break}}},r.prototype.syncHandleWidths=function(){var n=this,i=t.getWidth(this.table);r.setWidth(this.dragHandlesContainer,i),this.dragHandlesContainer.style.minWidth=i+"px";var a=this.getResizableHeaders();this.getDragHandlers().forEach(function(i,r){var s=t.getInnerHeight(n.options.resizeFromBody?n.table:n.table.tHead);if(r<a.length){var o=a[r],l=getComputedStyle(o),h=t.getOuterWidth(o);h-=e.parseStyleDimension(l.paddingLeft,!1),h-=e.parseStyleDimension(l.paddingRight,!1),h+=t.getOffset(o).left,h-=t.getOffset(n.dragHandlesContainer).left,i.style.left=h+"px",i.style.height=s+"px"}})},r.prototype.getResizableHeaders=function(){return this.tableHeaders.filter(function(e,t){return e.hasAttribute(i.attibutes.dataResizable)})},r.prototype.handlePointerDown=function(e){this.handlePointerUp(e);var n=e.target;if(null!=n&&"DIV"===n.nodeName&&t.hasClass(n,i.classes.handle)&&("number"!=typeof e.button||0===e.button)){var s=n,o=this.getDragHandlers().indexOf(s),l=this.getResizableHeaders();if(!(o>=l.length)){var h=(new Date).getTime(),d=h-this.lastPointerDown<this.options.doubleClickDelay,u=l[o],c=r.getWidth(u),p=r.getWidth(this.table),f=new a;f.column=u,f.dragHandler=s,f.pointer={x:t.getPointerX(e),isDoubleClick:d},f.originalWidths={column:c,table:p},this.detachHandlers(),this.attachHandlers(),t.addClass(this.table,i.classes.tableResizing),t.addClass(this.wrapper,i.classes.tableResizing),t.addClass(s,i.classes.columnResizing),t.addClass(u,i.classes.columnResizing),this.lastPointerDown=h,this.eventData=f;var b=new CustomEvent(i.events.eventResizeStart,{detail:{column:u,columnWidth:c,table:this.table,tableWidth:p}});this.table.dispatchEvent(b),e.preventDefault()}}},r.prototype.handlePointerMove=function(e){if(this.eventData){var n=t.getPointerX(e)-this.eventData.pointer.x;if(0!==n){var a=this.eventData.originalWidths.table+n,s=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+n);r.setWidth(this.table,a),r.setWidth(this.eventData.column,s),this.eventData.newWidths={column:s,table:a};var o=new CustomEvent(i.events.eventResize,{detail:{column:this.eventData.column,columnWidth:s,table:this.table,tableWidth:a}});this.table.dispatchEvent(o)}}},r.prototype.handlePointerUp=function(e){if(this.detachHandlers(),this.eventData){this.eventData.pointer.isDoubleClick&&this.handleDoubleClick(e),t.removeClass(this.table,i.classes.tableResizing),t.removeClass(this.wrapper,i.classes.tableResizing),t.removeClass(this.eventData.dragHandler,i.classes.columnResizing),t.removeClass(this.eventData.column,i.classes.columnResizing),this.checkTableWidth(),this.syncHandleWidths(),this.refreshWrapperStyle(),this.saveColumnWidths();var n=this.eventData.newWidths||this.eventData.originalWidths,a=new CustomEvent(i.events.eventResizeStop,{detail:{column:this.eventData.column,columnWidth:n.column,table:this.table,tableWidth:n.table}});this.table.dispatchEvent(a),this.eventData=null}},r.prototype.handleDoubleClick=function(e){if(this.eventData&&this.eventData.column){var n=this.eventData.column,a=this.tableHeaders.indexOf(n),s=0,o=[];this.tableHeaders.forEach(function(e,t){e.hasAttribute(i.attibutes.dataResizable)||o.push(t)});var l=this.ownerDocument.createElement("span");l.style.position="absolute",l.style.left="-99999px",l.style.top="-99999px",l.style.visibility="hidden",this.ownerDocument.body.appendChild(l);for(var h=this.table.querySelectorAll("tr"),d=0;d<h.length;d++)for(var u=h[d],c=u.querySelectorAll("td, th"),p=0,f=0;f<c.length;f++){var b=c[f],m=1;if(b.hasAttribute("colspan")){var v=b.getAttribute("colspan")||"1",g=parseInt(v);m=isNaN(g)?1:g}if(-1===o.indexOf(f)&&1===m&&p===a){s=Math.max(s,t.getTextWidth(b,l));break}p+=m}this.ownerDocument.body.removeChild(l);var y=s-t.getWidth(n);if(0!==y){var w=this.eventData.originalWidths.table+y,D=this.constrainWidth(this.eventData.column,this.eventData.originalWidths.column+y);r.setWidth(this.table,w),r.setWidth(this.eventData.column,D),this.eventData.newWidths={column:D,table:w};var W=new CustomEvent(i.events.eventResize,{detail:{column:this.eventData.column,columnWidth:D,table:this.table,tableWidth:w}});this.table.dispatchEvent(W)}}},r.prototype.attachHandlers=function(){var e=this;i.events.pointerMove.forEach(function(t,n){e.ownerDocument.addEventListener(t,e.onPointerMoveRef,!1)}),i.events.pointerUp.forEach(function(t,n){e.ownerDocument.addEventListener(t,e.onPointerUpRef,!1)})},r.prototype.detachHandlers=function(){var e=this;i.events.pointerMove.forEach(function(t,n){e.ownerDocument.removeEventListener(t,e.onPointerMoveRef,!1)}),i.events.pointerUp.forEach(function(t,n){e.ownerDocument.removeEventListener(t,e.onPointerUpRef,!1)})},r.prototype.refreshWrapperStyle=function(){if(null!=this.wrapper){var e=this.wrapper.style.overflowX;this.wrapper.style.overflowX="hidden",this.wrapper.style.overflowX=e}},r.prototype.saveColumnWidths=function(){if(this.options.store){var e=r.generateTableId(this.table);if(0!==e.length){var t={table:r.getWidth(this.table),columns:{}};this.getResizableHeaders().forEach(function(e,n){t.columns[r.generateColumnId(e)]=r.getWidth(e)}),this.options.store.set(e,t)}}},r.prototype.createHandlerReferences=function(){var e=this;this.onPointerDownRef||(this.onPointerDownRef=function(t){e.handlePointerDown(t)}),this.onPointerMoveRef||(this.onPointerMoveRef=function(t){e.handlePointerMove(t)}),this.onPointerUpRef||(this.onPointerUpRef=function(t){e.handlePointerUp(t)})},r.prototype.registerWindowResizeHandler=function(){var e=this.ownerDocument.defaultView;r.windowResizeHandlerRegistered||(r.windowResizeHandlerRegistered=!0,i.events.windowResize.forEach(function(t,n){e.addEventListener(t,r.onWindowResize,!1)}))},r.prototype.handleWindowResize=function(){this.checkTableWidth(),this.syncHandleWidths()},r.onWindowResize=function(e){var t=e.target;if(null!=t)for(var n=t.document.querySelectorAll("."+i.classes.table),a=0;a<n.length;a++){var r=n[a];"object"==typeof r[i.dataPropertyname]&&r[i.dataPropertyname].handleWindowResize()}},r.generateColumnId=function(e){return(e.getAttribute(i.attibutes.dataResizable)||"").trim().replace(/\./g,"_")},r.generateTableId=function(e){var t=(e.getAttribute(i.attibutes.dataResizableTable)||"").trim().replace(/\./g,"_");return t.length?"rtc/"+t:t},r.getWidth=function(n){return""===n.style.width?t.getWidth(n):e.parseStyleDimension(n.style.width,!1)},r.setWidth=function(e,t){var n=t.toFixed(2);n=t>0?n:"0",e.style.width=n+"px"},r.getInstanceId=function(){return r.instancesCount++},r.instancesCount=0,r.windowResizeHandlerRegistered=!1,r}()}();